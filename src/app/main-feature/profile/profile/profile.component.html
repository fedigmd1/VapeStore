<div class="breadcrumb-section">
  <div class="container">
    <div fxLayout="row" fxLayoutAlign="space-between start" class="">
      <div class="breadcrumb-title  pr-15" fxFlex="100" fxFlex.gt-md="45" fxFlex.md="45">
        <div class="page-title">
          <h4>My account</h4>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="content-wrapper container mt-4 mb-4">
  <section class="content">
    <div class="container-fluid">
      <div>
        <div>
          <!-- Profile Image -->
          <div class="card card-info card-outline">
            <div class="card-body box-profile d-flex justify-content-center align-items-center flex-column ">
              <div class="position-relative">
                <img class="profile-user-img img-fluid img-circle " [src]="userDetails.picture"
                  onerror="this.src='../../../../assets/images/user-photo.jpg'" alt="User profile picture">
                <span class="update-picture-btn d-flex justify-content-center align-items-center" (click)="openFile()"
                  data-toggle="tooltip" data-placement="top" title="Update picture">
                  <mat-icon class="d-flex justify-content-center align-items-center">camera_alt
                  </mat-icon>
                </span>
              </div>
              <h4 class="profile-username text-center mt-3">{{userDetails.first_name | titlecase}}
                {{userDetails.last_name | titlecase}}</h4>
            </div>
          </div>
        </div>
        <div>
          <div class="card">
            <div class="card-header p-2">
              <div>
                <h4>Personal informations</h4>
              </div>
            </div><!-- /.card-header -->
            <div class="card-body">
              <form class="form-horizontal" [formGroup]="updateProfileForm">
                <div class="position-relative">
               
                  <div *ngIf="!showEditUserName">
                    <strong class="d-flex  align-items-center mb-1">
                      <mat-icon>person</mat-icon><span>Username</span>
                    </strong>
                    <p class="text-muted">
                      {{userDetails.first_name | titlecase}} {{userDetails.last_name | titlecase}}
                    </p>
                  </div>
                  <div *ngIf="showEditUserName">
                    <div class="form-group row mb-3">
                      <div class="col-lg-3 ">
                        <label  class=" col-md-12 col-form-label mr-2">Firstname</label>
              <input class="form-control" [class.is-invalid]="firstName.invalid"  [ngClass]="{'error-form-control' : firstName.invalid}" placeholder="Fistname" type="text" formControlName="firstName" >
              <div *ngIf="firstName.invalid" class="text-danger text-left">
                <small *ngIf="firstName.errors?.required">Firstname is required*</small>
                    </div>
                      </div>
                      <div class="col-lg-3 ">
                        <label  class="col-md-12 col-form-label  mr-2">Lastname</label>
                        <input class="form-control" [class.is-invalid]="lastName.invalid" [ngClass]="{'error-form-control' : lastName.invalid}" placeholder="Lastname" type="text" formControlName="lastName" >
                        <div *ngIf="lastName.invalid" class="text-danger text-left">
                          <small *ngIf="lastName.errors?.required">Lastname is required*</small>
                        </div>
                      </div>
                    
                        <div class="d-flex align-items-end col-lg-1">
                          <button type="submit" class="btn mt-3 w-100" (click)="updateInfo()">Submit</button>
                        </div>
                      
                    </div>
                  </div>
                  <div class="icon-update">
                    <mat-icon class="cursor-pointer edit-btn d-flex justify-content-center align-items-center" data-toggle="tooltip" data-placement="top" title="Settings"
                    (click)="showEditUsenameForm()">create</mat-icon>
                  </div>
              </div>
                <hr>
                <strong class="d-flex  align-items-center mb-1">
                  <mat-icon>mail</mat-icon><span>Email</span>
                </strong>
                <p class="text-muted">
                  {{userDetails.email}}
                </p>
                <div >
                  <hr>
                  <div class="position-relative">
               
                    <div *ngIf="!showEditAdress">
                      <strong class="d-flex  align-items-center mb-1">
                        <mat-icon>home</mat-icon><span>Address</span>
                      </strong>
                      <p class="text-muted">{{(userDetails.adress | titlecase) || '--'}}</p>
                    </div>
                    <div *ngIf="showEditAdress">
                      <div class="form-group row mb-3">
                        <div class="col-lg-3  col-md-12">
                          <label  class=" col-md-12 col-form-label mr-2">Address</label>
                          <input class="form-control" [class.is-invalid]="address.invalid" [ngClass]="{'error-form-control' : address.invalid}" placeholder="Address" type="text" formControlName="address" >
                          <div *ngIf="address.invalid" class="text-danger text-left">
                            <small *ngIf="address.errors?.required">Address is required*</small>
                          </div>
                        </div>
                          <div class="d-flex align-items-end col-lg-1 col-md-12">
                            <button type="submit" class="btn w-100 mt-3" (click)="updateInfo()">Submit</button>
                          </div>
                        
                      </div>
                    </div>
                  <div class="icon-update">
                  <mat-icon class="cursor-pointer edit-btn d-flex justify-content-center align-items-center" data-toggle="tooltip" data-placement="top" title="Settings"
                  (click)="showEditAdressForm()">create</mat-icon>
                </div>
                </div>
                  <hr> 
                  <div class="position-relative">
               
                    <div *ngIf="!showEditPhoneNumber">
                      <strong class="d-flex  align-items-center mb-1">
                        <mat-icon> phone</mat-icon><span>Phone number</span>
                      </strong>
                      <p class="text-muted">{{userDetails.phone || '--'}}
                      </p>
                    </div>
                    <div *ngIf="showEditPhoneNumber">
                      <div class="form-group row mb-3">
                        <div class="col-lg-3  col-md-12">
                          <label  class=" col-md-12 col-form-label mr-2">Phone number</label>
                          <input class="form-control" [class.is-invalid]="phone.invalid" [ngClass]="{'error-form-control' : phone.invalid}" placeholder="Phone number" type="number"
                           formControlName="phone">
                          <div *ngIf="phone.invalid" class="text-danger text-left">
                            <small *ngIf="phone.errors?.required">Phone number is required*</small>
                          </div>
                          <div *ngIf="phone.invalid" class="text-danger text-left">
                            <small *ngIf="phone.errors">Invalid Phone Number</small>
                          </div>
                        </div>
                          <div class="d-flex align-items-end col-lg-1 col-md-12">
                            <button type="submit" class="btn w-100 mt-3" (click)="updateInfo()">Submit</button>
                          </div>
                        
                      </div>
                    </div>
                  <div class="icon-update">
                  <mat-icon class="cursor-pointer edit-btn d-flex justify-content-center align-items-center" data-toggle="tooltip" data-placement="top" title="Settings"
                  (click)="showEditPhoneNbrForm()">create</mat-icon>
                </div>
                </div>
                </div>
              </form>
              <form class="form-horizontal" [formGroup]="updatePasswordForm" (submit)="updatePassword()">
                <hr>
                <div class="position-relative">
                  <div *ngIf="!showEditPassword">
                    <strong class="d-flex  align-items-center mb-1">
                      <mat-icon>https</mat-icon><span>Password</span>
                    </strong>
                    <p class="text-muted">
                      ***********
                    </p>
                  </div>
                  <div *ngIf="showEditPassword">
                    <div class="form-group row mb-3">
                      <div class="col-lg-3  col-md-12">
                        <label  class=" col-md-12 col-form-label mr-2">Old password</label>
                        <div>
                          <input type="password" class="form-control" formControlName="oldPassword"
                            [class.is-invalid]="oldPassword.invalid && oldPassword.touched"
                            [ngClass]="{'error-form-control' : oldPassword.invalid && oldPassword.touched}">
                          <div *ngIf="oldPassword.invalid && oldPassword.touched" class="text-danger text-left">
                            <small *ngIf="oldPassword.errors?.required">Old password is required*</small>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-3  col-md-12">
                        <label  class="col-md-12 col-form-label  mr-2">New password</label>
                        <div>
                          <input type="password" class="form-control" formControlName="password"
                            [class.is-invalid]="password.invalid && password.touched"
                            [ngClass]="{'error-form-control' : password.invalid && password.touched}">
                          <div *ngIf="password.invalid && password.touched" class="text-danger text-left">
                            <small *ngIf="password.errors?.required">New password is required*</small>
                          </div>
                        </div>
                      </div>    
                       <div class="col-lg-3  col-md-12">
                        <label  class="col-md-12 col-form-label  mr-2">Confirm password</label>
                        <div>
                          <input type="password" class="form-control" formControlName="confirmPassword"
                            [class.is-invalid]="confirmPassword.invalid && confirmPassword.touched"
                            [ngClass]="{'error-form-control' : confirmPassword.invalid && confirmPassword.touched}">
                          <div *ngIf="confirmPassword.invalid && confirmPassword.touched" class="text-danger text-left">
                            <small *ngIf="confirmPassword.errors?.required">Confirm password is required*</small>
                          </div>
                          <div class="text-danger text-left" >
                            <small *ngIf="validatepasswords">Passwords must match</small>
                        </div>
                        </div>
                      </div>
                    
                        <div class="d-flex align-items-end col-lg-1  col-md-12">
                          <button type="submit" class="btn mt-3 w-100">Submit</button>
                        </div>
                      
                    </div>
                  </div>
                  <div class="icon-update">
                <mat-icon class="cursor-pointer edit-btn d-flex justify-content-center align-items-center" data-toggle="tooltip" data-placement="top" title="Settings"
                (click)="showEditPasswordForm()">create</mat-icon>
              </div>
              </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<input #inputFile (change)="fileChangeEvent($event)" class="form-control disableInput border-primary-13 "
  accept="image/*" class="hideInput" type="file" />